"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var aurelia_router_1 = require("aurelia-router");
var role_store_1 = require("./role-store");
exports.RoleStore = role_store_1.default;
var authorize_route_step_1 = require("./authorize-route-step");
var authorize_service_1 = require("./authorize-service");
exports.AuthorizeService = authorize_service_1.default;
function configure(framework, config) {
    var roleStore = framework.container.get(role_store_1.default);
    config(roleStore);
    framework.globalResources('./permission-only');
    framework.aurelia.start().then(function () {
        var appRouter = framework.container.get(aurelia_router_1.AppRouter);
        appRouter.pipelineProvider.steps.splice(3, 0, authorize_route_step_1.default);
    });
}
exports.configure = configure;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9hdXJlbGlhLXBlcm1pc3Npb24udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFDQSxpREFBMkM7QUFFM0MsMkNBQXFDO0FBb0JuQyxvQkFwQkssb0JBQVMsQ0FvQkw7QUFuQlgsK0RBQXdEO0FBQ3hELHlEQUFtRDtBQW1CakQsMkJBbkJLLDJCQUFnQixDQW1CTDtBQWpCbEIsbUJBQTBCLFNBQWlDLEVBQUUsTUFBMkI7SUFFdEYsSUFBTSxTQUFTLEdBQWMsU0FBUyxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsb0JBQVMsQ0FBQyxDQUFDO0lBRWhFLE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQztJQUVsQixTQUFTLENBQUMsZUFBZSxDQUFDLG1CQUFtQixDQUFDLENBQUM7SUFFL0MsU0FBUyxDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUUsQ0FBQyxJQUFJLENBQUM7UUFFN0IsSUFBTSxTQUFTLEdBQWMsU0FBUyxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsMEJBQVMsQ0FBQyxDQUFDO1FBQzFELFNBQVUsQ0FBQyxnQkFBZ0IsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsOEJBQWtCLENBQUMsQ0FBQztJQUMzRSxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUM7QUFiRCw4QkFhQyIsImZpbGUiOiJhdXJlbGlhLXBlcm1pc3Npb24uanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBGcmFtZXdvcmtDb25maWd1cmF0aW9uIH0gZnJvbSAnYXVyZWxpYS1mcmFtZXdvcmsnO1xyXG5pbXBvcnQgeyBBcHBSb3V0ZXIgfSBmcm9tICdhdXJlbGlhLXJvdXRlcic7XHJcblxyXG5pbXBvcnQgUm9sZVN0b3JlIGZyb20gJy4vcm9sZS1zdG9yZSc7XHJcbmltcG9ydCBBdXRob3JpemVSb3V0ZVN0ZXAgZnJvbSAnLi9hdXRob3JpemUtcm91dGUtc3RlcCc7XHJcbmltcG9ydCBBdXRob3JpemVTZXJ2aWNlIGZyb20gJy4vYXV0aG9yaXplLXNlcnZpY2UnO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNvbmZpZ3VyZShmcmFtZXdvcms6IEZyYW1ld29ya0NvbmZpZ3VyYXRpb24sIGNvbmZpZzogKHJvbGVTdG9yZSkgPT4gdm9pZCkge1xyXG5cclxuICBjb25zdCByb2xlU3RvcmUgPSA8Um9sZVN0b3JlPmZyYW1ld29yay5jb250YWluZXIuZ2V0KFJvbGVTdG9yZSk7XHJcblxyXG4gIGNvbmZpZyhyb2xlU3RvcmUpO1xyXG5cclxuICBmcmFtZXdvcmsuZ2xvYmFsUmVzb3VyY2VzKCcuL3Blcm1pc3Npb24tb25seScpO1xyXG5cclxuICBmcmFtZXdvcmsuYXVyZWxpYS5zdGFydCgpLnRoZW4oKCkgPT4ge1xyXG4gICAgLy8gQWRkIGF1dGhvcml6ZSBzdGVwIGJlZm9yZSB2aWV3LW1vZGVsIGFjdGl2YXRlIHByZWRlZmluZWQgcGlwZWxpbmUgc3RlcFxyXG4gICAgY29uc3QgYXBwUm91dGVyID0gPEFwcFJvdXRlcj5mcmFtZXdvcmsuY29udGFpbmVyLmdldChBcHBSb3V0ZXIpO1xyXG4gICAgKDxhbnk+YXBwUm91dGVyKS5waXBlbGluZVByb3ZpZGVyLnN0ZXBzLnNwbGljZSgzLCAwLCBBdXRob3JpemVSb3V0ZVN0ZXApO1xyXG4gIH0pO1xyXG59XHJcblxyXG5leHBvcnQge1xyXG4gIFJvbGVTdG9yZSxcclxuICBBdXRob3JpemVTZXJ2aWNlXHJcbn1cclxuIl19
