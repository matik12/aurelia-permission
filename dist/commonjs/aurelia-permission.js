"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var aurelia_router_1 = require("aurelia-router");
var permission_store_1 = require("./permission-store");
exports.PermissionsStore = permission_store_1.default;
var authorize_route_step_1 = require("./authorize-route-step");
var authorize_service_1 = require("./authorize-service");
exports.AuthorizeService = authorize_service_1.default;
function configure(framework, config) {
    var permissionsStore = framework.container.get(permission_store_1.default);
    config(permissionsStore);
    var appRouter = framework.container.get(aurelia_router_1.AppRouter);
    var authorizePipelineStep = appRouter.pipelineProvider.steps.find(function (step) { return step.slotName === 'preActivate'; });
    authorizePipelineStep.steps.push(authorize_route_step_1.default);
    framework.globalResources('./permission-only');
}
exports.configure = configure;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9hdXJlbGlhLXBlcm1pc3Npb24udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFDQSxpREFBMkM7QUFFM0MsdURBQWtEO0FBaUJoRCwyQkFqQkssMEJBQWdCLENBaUJMO0FBaEJsQiwrREFBd0Q7QUFDeEQseURBQW1EO0FBZ0JqRCwyQkFoQkssMkJBQWdCLENBZ0JMO0FBZGxCLG1CQUEwQixTQUFpQyxFQUFFLE1BQWtDO0lBQzdGLElBQU0sZ0JBQWdCLEdBQXFCLFNBQVMsQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLDBCQUFnQixDQUFDLENBQUM7SUFDckYsTUFBTSxDQUFDLGdCQUFnQixDQUFDLENBQUM7SUFHekIsSUFBTSxTQUFTLEdBQUcsU0FBUyxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsMEJBQVMsQ0FBQyxDQUFDO0lBQ3JELElBQU0scUJBQXFCLEdBQUcsU0FBUyxDQUFDLGdCQUFnQixDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsVUFBQSxJQUFJLElBQU0sTUFBTSxDQUFDLElBQUksQ0FBQyxRQUFRLEtBQUssYUFBYSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDekgscUJBQXFCLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyw4QkFBa0IsQ0FBQyxDQUFDO0lBRXJELFNBQVMsQ0FBQyxlQUFlLENBQUMsbUJBQW1CLENBQUMsQ0FBQztBQUNqRCxDQUFDO0FBVkQsOEJBVUMiLCJmaWxlIjoiYXVyZWxpYS1wZXJtaXNzaW9uLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRnJhbWV3b3JrQ29uZmlndXJhdGlvbiB9IGZyb20gJ2F1cmVsaWEtZnJhbWV3b3JrJztcclxuaW1wb3J0IHsgQXBwUm91dGVyIH0gZnJvbSAnYXVyZWxpYS1yb3V0ZXInO1xyXG5cclxuaW1wb3J0IFBlcm1pc3Npb25zU3RvcmUgZnJvbSAnLi9wZXJtaXNzaW9uLXN0b3JlJztcclxuaW1wb3J0IEF1dGhvcml6ZVJvdXRlU3RlcCBmcm9tICcuL2F1dGhvcml6ZS1yb3V0ZS1zdGVwJztcclxuaW1wb3J0IEF1dGhvcml6ZVNlcnZpY2UgZnJvbSAnLi9hdXRob3JpemUtc2VydmljZSc7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY29uZmlndXJlKGZyYW1ld29yazogRnJhbWV3b3JrQ29uZmlndXJhdGlvbiwgY29uZmlnOiAocGVybWlzc2lvbnNTdG9yZSkgPT4gdm9pZCkge1xyXG4gIGNvbnN0IHBlcm1pc3Npb25zU3RvcmUgPSA8UGVybWlzc2lvbnNTdG9yZT5mcmFtZXdvcmsuY29udGFpbmVyLmdldChQZXJtaXNzaW9uc1N0b3JlKTtcclxuICBjb25maWcocGVybWlzc2lvbnNTdG9yZSk7XHJcblxyXG4gIC8vIENvbmZpZ3VyZSBwaXBlbGluZSBzdGVwIGZvciBhdXRob3JpemF0aW9uIGJlZm9yZSBhY3RpdmF0ZSBpcyBpbnZva2VkXHJcbiAgY29uc3QgYXBwUm91dGVyID0gZnJhbWV3b3JrLmNvbnRhaW5lci5nZXQoQXBwUm91dGVyKTtcclxuICBjb25zdCBhdXRob3JpemVQaXBlbGluZVN0ZXAgPSBhcHBSb3V0ZXIucGlwZWxpbmVQcm92aWRlci5zdGVwcy5maW5kKHN0ZXAgPT4geyByZXR1cm4gc3RlcC5zbG90TmFtZSA9PT0gJ3ByZUFjdGl2YXRlJzsgfSk7XHJcbiAgYXV0aG9yaXplUGlwZWxpbmVTdGVwLnN0ZXBzLnB1c2goQXV0aG9yaXplUm91dGVTdGVwKTtcclxuXHJcbiAgZnJhbWV3b3JrLmdsb2JhbFJlc291cmNlcygnLi9wZXJtaXNzaW9uLW9ubHknKTtcclxufVxyXG5cclxuZXhwb3J0IHtcclxuICBQZXJtaXNzaW9uc1N0b3JlLFxyXG4gIEF1dGhvcml6ZVNlcnZpY2VcclxufVxyXG4iXX0=
