define(["require", "exports", "aurelia-router", "./permission-store", "./authorize-route-step", "./authorize-service"], function (require, exports, aurelia_router_1, permission_store_1, authorize_route_step_1, authorize_service_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.PermissionsStore = permission_store_1.default;
    exports.AuthorizeService = authorize_service_1.default;
    function configure(framework, config) {
        var permissionsStore = framework.container.get(permission_store_1.default);
        config(permissionsStore);
        var appRouter = framework.container.get(aurelia_router_1.AppRouter);
        var authorizePipelineStep = appRouter.pipelineProvider.steps.find(function (step) { return step.slotName === 'preActivate'; });
        authorizePipelineStep.steps.push(authorize_route_step_1.default);
        framework.globalResources('./permission-only');
    }
    exports.configure = configure;
});

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9hdXJlbGlhLXBlcm1pc3Npb24udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0lBb0JFLDJCQWpCSywwQkFBZ0IsQ0FpQkw7SUFDaEIsMkJBaEJLLDJCQUFnQixDQWdCTDtJQWRsQixtQkFBMEIsU0FBaUMsRUFBRSxNQUFrQztRQUM3RixJQUFNLGdCQUFnQixHQUFxQixTQUFTLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQywwQkFBZ0IsQ0FBQyxDQUFDO1FBQ3JGLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO1FBR3pCLElBQU0sU0FBUyxHQUFHLFNBQVMsQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLDBCQUFTLENBQUMsQ0FBQztRQUNyRCxJQUFNLHFCQUFxQixHQUFHLFNBQVMsQ0FBQyxnQkFBZ0IsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLFVBQUEsSUFBSSxJQUFNLE1BQU0sQ0FBQyxJQUFJLENBQUMsUUFBUSxLQUFLLGFBQWEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3pILHFCQUFxQixDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsOEJBQWtCLENBQUMsQ0FBQztRQUVyRCxTQUFTLENBQUMsZUFBZSxDQUFDLG1CQUFtQixDQUFDLENBQUM7SUFDakQsQ0FBQztJQVZELDhCQVVDIiwiZmlsZSI6ImF1cmVsaWEtcGVybWlzc2lvbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEZyYW1ld29ya0NvbmZpZ3VyYXRpb24gfSBmcm9tICdhdXJlbGlhLWZyYW1ld29yayc7XHJcbmltcG9ydCB7IEFwcFJvdXRlciB9IGZyb20gJ2F1cmVsaWEtcm91dGVyJztcclxuXHJcbmltcG9ydCBQZXJtaXNzaW9uc1N0b3JlIGZyb20gJy4vcGVybWlzc2lvbi1zdG9yZSc7XHJcbmltcG9ydCBBdXRob3JpemVSb3V0ZVN0ZXAgZnJvbSAnLi9hdXRob3JpemUtcm91dGUtc3RlcCc7XHJcbmltcG9ydCBBdXRob3JpemVTZXJ2aWNlIGZyb20gJy4vYXV0aG9yaXplLXNlcnZpY2UnO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNvbmZpZ3VyZShmcmFtZXdvcms6IEZyYW1ld29ya0NvbmZpZ3VyYXRpb24sIGNvbmZpZzogKHBlcm1pc3Npb25zU3RvcmUpID0+IHZvaWQpIHtcclxuICBjb25zdCBwZXJtaXNzaW9uc1N0b3JlID0gPFBlcm1pc3Npb25zU3RvcmU+ZnJhbWV3b3JrLmNvbnRhaW5lci5nZXQoUGVybWlzc2lvbnNTdG9yZSk7XHJcbiAgY29uZmlnKHBlcm1pc3Npb25zU3RvcmUpO1xyXG5cclxuICAvLyBDb25maWd1cmUgcGlwZWxpbmUgc3RlcCBmb3IgYXV0aG9yaXphdGlvbiBiZWZvcmUgYWN0aXZhdGUgaXMgaW52b2tlZFxyXG4gIGNvbnN0IGFwcFJvdXRlciA9IGZyYW1ld29yay5jb250YWluZXIuZ2V0KEFwcFJvdXRlcik7XHJcbiAgY29uc3QgYXV0aG9yaXplUGlwZWxpbmVTdGVwID0gYXBwUm91dGVyLnBpcGVsaW5lUHJvdmlkZXIuc3RlcHMuZmluZChzdGVwID0+IHsgcmV0dXJuIHN0ZXAuc2xvdE5hbWUgPT09ICdwcmVBY3RpdmF0ZSc7IH0pO1xyXG4gIGF1dGhvcml6ZVBpcGVsaW5lU3RlcC5zdGVwcy5wdXNoKEF1dGhvcml6ZVJvdXRlU3RlcCk7XHJcblxyXG4gIGZyYW1ld29yay5nbG9iYWxSZXNvdXJjZXMoJy4vcGVybWlzc2lvbi1vbmx5Jyk7XHJcbn1cclxuXHJcbmV4cG9ydCB7XHJcbiAgUGVybWlzc2lvbnNTdG9yZSxcclxuICBBdXRob3JpemVTZXJ2aWNlXHJcbn1cclxuIl19
